{"version":3,"sources":["algorithm/Node.ts","components/Result.tsx","components/Anagram.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Node","letter","final","depth","childrens","letters","node","this","chars","toLowerCase","forEach","char","index","undefined","length","minWordSize","tiles","replaceAll","minLength","anagrams","path","root","word","join","Object","entries","count","Result","props","useState","filterPermutations","setFilterPermutations","minMaxWordLength","setMinMaxWordLength","contains","setContains","startWith","setStartWith","diplayedAnagrams","uniques","Set","map","sentence","split","sort","filter","find","includes","startsWith","htmlFor","type","id","value","onChange","e","parseInt","target","onClick","a","i","newRoot","Anagram","MAX_RESULTS","setAnagrams","isLoading","setIsLoading","setSentence","minWordLength","setMinWordLength","useEffect","fetch","process","then","r","text","body","entry","add","searchAnagrams","iterable","anagram","current","next","results","done","push","elements","generator","isDone","preventDefault","onSubmit","name","autoFocus","disabled","searchNextAnagrams","App","className","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3f53f445.chunk.js","sourcesContent":["// Source: https://prograide.com/pregunta/46535/algorithme-pour-generer-des-anagrammes\n\nexport class Node {\n    static newRoot(): Node {\n        return new Node('', false, 0);\n    }\n\n    constructor(public readonly letter: string,\n                public final: boolean,\n                public readonly depth: number,\n                public childrens: { [k in string]: Node } = {}) {\n    }\n\n    public add(letters: string): void {\n        let node: Node = this;\n        const chars = [...letters.toLowerCase()];\n        chars.forEach((char, index) => {\n            if (node.childrens[char] === undefined) {\n                node.childrens[char] = new Node(char, index === chars.length - 1, index + 1)\n            }\n            node = node.childrens[char];\n        });\n    }\n\n    public anagram(letters: string, minWordSize = 3): Generator<string> {\n        const tiles: { [k in string]: number } = {};\n        const chars = [...letters.replaceAll(' ', '').toLowerCase()];\n        chars.forEach((char) => {\n            tiles[char] = (tiles[char] || 0) + 1\n        });\n        const minLength = chars.length;\n        return this.anagrams(tiles, [], this, minLength, minWordSize);\n    }\n\n    private* anagrams(tiles: { [p: string]: number }, path: string[], root: Node, minLength: number, minWordSize: number): Generator<string> {\n        if (this.final && this.depth >= minWordSize) {\n            const word = path.join('');\n            const length = word.replaceAll(' ', '').length;\n            if (length >= minLength) {\n                yield word;\n            }\n            for (const word of root.anagrams(tiles, [...path, ' '], root, minLength, minWordSize)) {\n                yield word;\n            }\n        }\n        for (const [letter, node] of Object.entries(this.childrens)) {\n            const count = tiles[letter] || 0;\n            if (count === 0) {\n                continue;\n            }\n            tiles[letter] = count - 1;\n            for (const word of node.anagrams(tiles, [...path, letter], root, minLength, minWordSize)) {\n                yield word;\n            }\n            tiles[letter] = count;\n        }\n    }\n}\n","import React, {useState} from \"react\";\n\nexport interface Props {\n    anagrams: string[]\n}\nexport const Result: React.FC<Props> = (props) => {\n    const [filterPermutations, setFilterPermutations] = useState(true);\n    const [minMaxWordLength, setMinMaxWordLength] = useState(5);\n    const [contains, setContains] = useState(\"\");\n    const [startWith, setStartWith] = useState(\"\");\n\n    let diplayedAnagrams = props.anagrams;\n    if (filterPermutations) {\n        const uniques = new Set(props.anagrams.map(sentence => sentence.split(\" \").sort().join(\" \")));\n        diplayedAnagrams = [...uniques];\n    }\n    diplayedAnagrams = diplayedAnagrams\n        .filter(sentence => sentence.split(\" \").find(word => word.length >= minMaxWordLength))\n    diplayedAnagrams = diplayedAnagrams\n        .filter(sentence => sentence.includes(contains));\n    diplayedAnagrams = diplayedAnagrams\n        .filter(sentence => sentence.split(\" \").find(word => word.startsWith(startWith)));\n\n    return (<>\n        <h4>{diplayedAnagrams.length} r√©sultat(s)</h4>\n        <div>\n            <div>\n                <label htmlFor=\"minMaxWordLength\">Taille minimale du mot le plus long</label>\n                <input type=\"number\" id=\"minMaxWordLength\" value={minMaxWordLength} onChange={(e) => setMinMaxWordLength(parseInt(e.target.value))}/>\n            </div>\n            <div>\n                <label htmlFor=\"contains\">Contient</label>\n                <input type=\"text\" id=\"contains\" value={contains} onChange={(e) => setContains(e.target.value)}/>\n            </div>\n            <div>\n                <label htmlFor=\"startWith\">A un mot qui commence par</label>\n                <input type=\"text\" id=\"startWith\" value={startWith} onChange={(e) => setStartWith(e.target.value)}/>\n            </div>\n            {filterPermutations ?\n                <button onClick={() => setFilterPermutations(false)}>Ne pas filtrer les permutations</button> :\n                <button onClick={() => setFilterPermutations(true)}>Filtrer les permutations</button>\n            }\n        </div>\n        <ul>\n            {diplayedAnagrams.map((a, i) => <li key={i}>{a}</li>)}\n        </ul>\n    </>)\n};\n","import React, {useEffect, useState} from \"react\";\nimport {Node} from \"../algorithm/Node\";\nimport {Result} from \"./Result\";\n\nconst node = Node.newRoot();\n\nexport interface IterationState {\n    generator: Generator<string>\n    elements: string[]\n    isDone: boolean\n}\n\nexport const Anagram: React.FC = () => {\n    const MAX_RESULTS = 5_000;\n    const [anagrams, setAnagrams] = useState<IterationState | null>(null);\n    const [isLoading, setIsLoading] = useState(true);\n    const [sentence, setSentence] = useState(\"bon courage\");\n    const [minWordLength, setMinWordLength] = useState(3);\n\n    useEffect(() => {\n        setIsLoading(true);\n        fetch(process.env.PUBLIC_URL + \"/data/dictionary_fr.txt\")\n            .then(r => r.text())\n            .then(body => body.split(\"\\n\"))\n            .then(entries => {\n                entries.forEach(entry => {\n                    node.add(entry.replaceAll(\"\\r\", \"\"))\n                });\n                setIsLoading(false);\n            });\n    }, []);\n\n    const searchAnagrams = (e: React.FormEvent<HTMLFormElement> | React.MouseEvent<HTMLButtonElement>) => {\n        let iterable = node.anagram(sentence, minWordLength);\n        let current = iterable.next();\n        let results = [];\n        let count = 0;\n        while (!current.done && count < MAX_RESULTS) {\n            results.push(current.value);\n            current = iterable.next();\n            count = count + 1;\n        }\n        setAnagrams({\n            elements: results,\n            generator: iterable,\n            isDone: !!current.done\n        })\n        e.preventDefault();\n    };\n\n    const searchNextAnagrams = (anagrams: IterationState) => {\n        let current = anagrams.generator.next();\n        let results = [];\n        let count = 0;\n        while (!current.done && count < MAX_RESULTS) {\n            results.push(current.value);\n            current = anagrams.generator.next();\n            count = count + 1;\n        }\n        setAnagrams({\n            elements: results,\n            generator: anagrams.generator,\n            isDone: !!current.done\n        })\n    }\n\n    return (<>\n        <h1>Anagrammes</h1>\n        {isLoading ? <p>Chargement du dictionnaire...</p> : null}\n        <form onSubmit={searchAnagrams}>\n            <div>\n                <label htmlFor=\"sentence\">Phrase</label>\n                <input type=\"text\" name=\"sentence\" autoFocus={true} value={sentence} onChange={(e) => setSentence(e.target.value)}/>\n            </div>\n            <div>\n                <label htmlFor=\"minWordLength\">Taille minimale des mots</label>\n                <input type=\"number\" id=\"minWordLength\" value={minWordLength} onChange={(e) => setMinWordLength(parseInt(e.target.value))}/>\n            </div>\n            <button disabled={isLoading} onClick={searchAnagrams}>Rechercher les anagrammes</button>\n        </form>\n        { anagrams && !anagrams.isDone ? (<>\n            Il y a plus de {MAX_RESULTS} r√©sultats\n            <button onClick={() => searchNextAnagrams(anagrams)}>charger les r√©sultats suivants</button></>\n        ) : null}\n        { anagrams ? <Result anagrams={anagrams.elements} /> : null}\n    </>);\n}\n","import React from 'react';\nimport './App.css';\nimport {Anagram} from \"./components/Anagram\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n        <Anagram/>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}